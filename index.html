<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARize - AR Viewer</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <!-- Desktop notice -->
    <div class="desktop-notice">
        <h2 style="margin-bottom: 20px; font-weight: 300;">Mobile Required</h2>
        <p style="opacity: 0.8; line-height: 1.5;">
            This AR experience requires a mobile device with camera access. 
        </p>
    </div>

    <!-- Loading screen -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <div class="loading-text">Loading AR Experience</div>
    </div>

    <!-- Camera video -->
    <video id="camera" autoplay muted playsinline></video>

    <!-- AR canvas -->
    <canvas id="ar-canvas"></canvas>

    <!-- Clean top controls -->
    <div class="top-controls">
        <button class="control-btn" onclick="goBack()" title="Close">×</button>
        <button class="control-btn" onclick="toggleStats()" title="Toggle Stats" id="statsToggle">ℹ</button>
        <button class="control-btn" onclick="toggleControls()" title="Toggle Controls" id="controlsToggle">⚙</button>
    </div>

    <!-- Spatial tracking status -->
    <div class="tracking-status" id="trackingStatus">Initializing tracking...</div>

    <!-- Toggleable stats panel -->
    <div class="stats-panel" id="statsPanel">
        <div class="stats-grid">
            <div class="stat">
                <span class="stat-label">Quality</span>
                <span class="stat-value" id="qualityValue">-</span>
            </div>
            <div class="stat">
                <span class="stat-label">Frames</span>
                <span class="stat-value" id="framesValue">-</span>
            </div>
            <div class="stat" id="confidenceRow" style="display: none;">
                <span class="stat-label">Confidence</span>
                <span class="stat-value" id="confidenceValue">-</span>
            </div>
            <div class="stat" id="modelRow" style="display: none;">
                <span class="stat-label">Type</span>
                <span class="stat-value" id="modelType">-</span>
            </div>
            <div class="stat">
                <span class="stat-label">Tracking</span>
                <span class="stat-value" id="trackingValue">Off</span>
            </div>
        </div>
    </div>

    <!-- Placement UI -->
    <div class="placement-ui" id="placementUI" style="display: none;">
        <div class="placement-title">Place Your Object</div>
        <div class="placement-subtitle">Find a flat surface and tap to place your 3D object in the real world</div>
        <button class="placement-btn" onclick="placeObject()">Place Object</button>
    </div>

    <!-- Clean bottom UI -->
    <div class="bottom-ui" id="bottomUI" style="display: none;">
        <!-- Interactive Controls -->
        <div class="control-panel" id="controlPanel" style="display: none;">
            <!-- Scale Control -->
            <div class="control-row">
                <span class="control-label">Size</span>
                <input type="range" class="control-slider" id="scaleSlider" 
                min="0.5" max="3.0" step="0.1" value="1.0"
                onchange="updateObjectScale(this.value)">
                <span class="control-value" id="scaleValue">100%</span>
            </div>
        </div>

        <div class="action-buttons">
            <button class="action-btn secondary-btn" onclick="resetPosition()">
                Reset
            </button>
            <button class="action-btn primary-btn" onclick="takeScreenshot()">
                Capture
            </button>
        </div>
    </div>

    <!-- Load JavaScript modules -->
    <script src="js/utils.js"></script>
    <script src="js/ui-controls.js"></script>
    <script src="js/ar-engine.js"></script>
    <script src="js/app.js"></script>
</body>
</html>